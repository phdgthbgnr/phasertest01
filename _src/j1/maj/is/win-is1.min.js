var winState={preload:function(){game.addDisplayLoader();game.load.onFileComplete.add(this.filecomplete,this);game.load.onLoadComplete.add(this.loadcomplete,this);game.load.image("sky2",game.pathImg+"jpg/sky2.jpg");game.load.image("won",game.pathText+"youwin.png");game.load.spritesheet("continue","_img/continue-1.png",270,60);game.load.spritesheet("backmenu","_img/backmain.png",306,43);game.load.image("eclair",game.pathImg+"png/eclair.png");game.load.image("freezer",game.pathImg+"png/freezer3.png");game.load.image("dialogue1",game.pathText+"dialoguefin-1-1.png");game.load.image("supersayan",game.pathImg+"png/supersayangodss.png");game.load.image("dialogue2",game.pathText+"dialoguefin-2.png");game.load.image("dialogue3",game.pathText+"dialoguefin-4.png");game.load.image("dialogue4",game.pathText+"dialoguefin-3.png");game.load.image("perso20",game.pathImg+"png/perso2big.png");game.load.image("perso21",game.pathImg+"png/perso3big.png");game.load.image("perso31",game.pathImg+"png/perso4big.png");game.load.image("fondnoir",game.pathImg+"png/fondnoird.png");game.load.audio("victory",[game.pathSnd+"Sound_1_Victory.ogg",game.pathSnd+"Sound_1_Victory.mp3",game.pathSnd+"Sound_1_Victory.m4a"]);game.load.image("tracking03",game.pathTrack+"pixel.gif?r=win")},create:function(){this.clicf=game.add.audio("clicf");this.nextsrc=2;this.sndvictory=game.add.audio("victory");var a=game.add.image(0,0,"sky2");game.set2Scale(a);var b=game.add.image(0,0,"eclair");game.set2Scale(b);this.won=game.add.image(game.world.centerX,0,"won");this.won.anchor.set(0.5,0);game.set2Scale(this.won);this.freezer=game.add.image(game.world.centerX,game.get1Position(80),"freezer");this.freezer.anchor.set(0.5,0);game.set2Scale(this.freezer);this.dialogue1=game.add.image(game.world.centerX,game.height-game.get1Position(74),"dialogue1");this.dialogue1.anchor.set(0.5,1);game.set2Scale(this.dialogue1);this.continuebt=game.add.button(0,0,"continue",this.continuer,this,1,0,2);game.set2ButtonScale(this.continuebt);this.continuebt.anchor.set(0.5,1);this.continuebt.x=game.world.centerX;this.continuebt.y=game.height-game.get1Position(60);this.sndvictory.play("",0,0.5,false,true)},continuer:function(){this.clicf.play("",0,0.3,false,true);switch(this.nextsrc){case 2:this.ecran2();this.continuebt.bringToTop();this.nextsrc=3;break;case 3:this.ecran3();break}},ecran2:function(){this.freezer.destroy();this.dialogue1.destroy();this.dialogue1.destroy();this.continuebt.destroy();this.won.destroy();this.sayan=game.add.image(game.world.centerX,game.world.centerY,"supersayan");this.sayan.anchor.set(0.5,0.5);game.set2Scale(this.sayan);this.dialogue2=game.add.image(game.world.centerX,game.height-game.get1Position(80),"dialogue2");this.dialogue2.anchor.set(0.5,1);game.set2Scale(this.dialogue2);this.continuebt=game.add.button(0,0,"continue",this.continuer,this,1,0,2);game.set2ButtonScale(this.continuebt);this.continuebt.anchor.set(0.5,1);this.continuebt.x=game.world.centerX;this.continuebt.y=game.height-game.get1Position(60)},ecran3:function(){this.dialogue2.destroy();this.continuebt.destroy();var d=game.add.button(0,0,"backmenu",this.restart,this,1,0,2);game.set2ButtonScale(d);d.anchor.set(0.5,1);d.x=game.world.centerX;d.y=game.height-game.get1Position(60);var a=game.add.image(0,0,"fondnoir");game.set2Scale(a);a.anchor.set(1,1);a.x=game.width+10;a.y=game.height;var g=game.add.image(0,0,"perso20");game.set2Scale(g);g.anchor.set(0.5,1);g.y=game.height-game.get1Position(20);g.x=game.width-game.get1Position(110);var b=game.add.image(0,0,"dialogue3");game.set2Scale(b);b.anchor.set(0.5,0);b.x=game.width-game.get1Position(170);b.y=game.get1Position(70);duree=100;game.add.tween(a).from({x:game.width+400},200,Phaser.Easing.Circular.Out,true,duree);game.add.tween(g).from({x:game.width+400},200,Phaser.Easing.Circular.Out,true,duree);game.add.tween(b).from({x:game.width+400},200,Phaser.Easing.Circular.Out,true,duree);game.add.tween(d).from({y:game.height+200},200,Phaser.Easing.Circular.Out,true,duree+300);var h=game.add.image(0,0,"fondnoir");game.set2Scale(h);h.anchor.set(0.5,1);h.scale.x*=-1;h.x=-h.width/2-10;h.y=game.height;var f=game.add.image(0,0,"perso21");game.set2Scale(f);f.anchor.set(0.5,1);f.scale.x*=-1;f.y=game.height-game.get1Position(20);f.x=game.get1Position(195);var e=game.add.image(0,0,"perso31");game.set2Scale(e);e.anchor.set(0.5,1);e.scale.x*=-1;e.y=game.height-game.get1Position(20);e.x=game.get1Position(90);var c=game.add.image(0,0,"dialogue4");game.set2Scale(c);c.anchor.set(0,0);c.x=game.get1Position(20);c.y=game.get1Position(70);game.add.tween(h).from({x:-400},200,Phaser.Easing.Circular.Out,true,duree);game.add.tween(f).from({x:-400},200,Phaser.Easing.Circular.Out,true,duree);game.add.tween(e).from({x:-400},200,Phaser.Easing.Circular.Out,true,duree);game.add.tween(c).from({x:-400},200,Phaser.Easing.Circular.Out,true,duree)},restart:function(){this.sndvictory.destroy();this.clicf.play("",0,0.3,false,true);game.state.start("menu")},filecomplete:function(a,d,e,b,c){game.processLoader(a)},loadcomplete:function(){game.destroyLoader()}};